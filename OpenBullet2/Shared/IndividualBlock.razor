@using OpenBullet2.Models
@using OpenBullet2.Helpers

<div class="card" style="background-color: @Block.Category.BackgroundColor; 
     color: @Block.Category.ForegroundColor; cursor: pointer; border: solid 3px #000;"
     @onclick="@(() => SelectedBlock.InvokeAsync(Block))">
    <div class="card-body">
        <h5 class="card-title">@Block.Name
            <span class="card-text oi @(isExpanded ? "oi-caret-top" : "oi-caret-bottom")" 
                  @onclick="SetExpanded" @onclick:stopPropagation="true"></span>
        </h5>
        
        @if (isExpanded)
        {
            <p class="card-text">@Block.Description</p>
            @if (Block.ExtraInfo != string.Empty)
            {
                <p class="card-text" style="font-size: 12px">@Block.ExtraInfo</p>
            }
        }
    </div>
</div>

@code {
    [Parameter] public BlockInfo Block { get; set; }
    [Parameter] public EventCallback<BlockInfo> SelectedBlock { get; set; }

    private bool isExpanded = false;

    private void SetExpanded()
    {
        isExpanded = !isExpanded;
    }
}
